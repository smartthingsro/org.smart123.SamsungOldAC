<style type="text/css">
  span label {
    wIPth: 100px
  }
</style>
<script type="text/javascript">
// Set window options
var wIPth   = 400;
var height  = 400;
var left    = (screen.wIPth/2)-(wIPth/2);
var top = (screen.height/2)-(height/2);
var url;

// Set translated items
$("label[for='name']").text(__('pair.configuration.name') + ':');
$("label[for='IP']").text(__('pair.configuration.IP') + ':');
$("label[for='MAC']").text(__('pair.configuration.MAC') + ':');
 
function configure() {
    //variables
    var name        = $("#name").val();
    var IP          = $("#IP").val();
    var MAC         = $("#MAC").val();

    if (IP != '' && name != '' && MAC != '') {
        var settings = {
            name: name,
            IP: IP,
            MAC: MAC
        };
            
        // Continue to back-end, pass along data
        Homey.emit( 'validate', settings, function( err, result ){
            if (err) {
                console.log(err);
                Homey.alert(err.message, 'error');
            } else {
                Homey.alert(__('IP found. Started pairing'), 'info');
                var device = {
                    data: { // this data object is saved to- and unique for the device. It is passed on the get and set functions as 1st argument
                        IP: name + '-' + IP // something unique, so your driver knows which physical device it is. A MAC address or Node IP, for example. This is required
                    },
                    name: name,
                    settings: {
                        name: name,
                        IP: IP,
                        MAC: MAC
                    }
                };

                Homey.addDevice(device, function( err, result ){
                    if( err ) { Homey.alert(err, 'error'); return }
                    setTimeout(function () {
                        Homey.done();
                    }, 5000);
                });
            }
        });
    } else {
        Homey.alert(__('IP and name required'), 'error');
    }
}
</script>

<p IP="authentication_text" data-i18n="pair.authorization.configuration_explanation"></p>
<p class="form-group">
  <span class="input-wrap">
    <label for="name">Name</label>
    <input type="text" ID="name"></input>
    
    <label for="IP">IP</label>
    <input type="text" ID="IP"></input>

    <label for="MAC">MAC</label>
    <input type="text" ID="MAC"></input>

  </span>
</p>
<button class="button" ID="authentication_button" onclick="configure();" data-i18n="pair.authorization.start_configuration">Add</button>
<br /><br />
<p class="youless-err-msg" style="color: #ff6300;"></p>
